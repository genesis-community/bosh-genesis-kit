---
meta:
  env_name: (( grab $GENESIS_ENVIRONMENT ))
  env_scale: (( grab params.env_scale || "dev" ))
  env_slug: (( grab $GENESIS_SECRETS_SLUG ))
  vault_mount: (( grab $GENESIS_SECRETS_MOUNT ))
  vault_tf: (( concat meta.vault_mount "tf/" meta.env_slug ))
  vault_env: (( concat meta.vault_mount meta.env_slug))
  vault_certs: (( concat meta.vault_mount "certs" ))
  trusted_certs:
    - (( vault meta.vault_certs "/org:ca" )) # Organization CA, if exists
    - (( vault meta.vault_certs "/dbs:ca" )) # External Databases CA

params: # TODO: ocfp-no-trusted-certs.yml
  trusted_certs: (( join "" meta.trusted_certs ))

  # Required for add-secrets
  ca_validity_period: "10y"
  cert_validity_period: "10y"
