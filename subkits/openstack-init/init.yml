---
resource_pools:
- name: (( grab params.bosh_vm_type ))
  cloud_properties:
    instance_type: (( grab params.openstack_flavor ))
    availability_zone: (( grab params.openstack_az ))
  stemcell: (( grab meta.latest_stemcells.bosh-openstack-kvm-ubuntu-trusty-go_agent-raw ))

networks:
- name: (( grab params.bosh_network ))
  type: manual
  subnets:
  - (( inline ))
  - cloud_properties:
      net_id: (( grab params.openstack_network_id ))

disk_pools:
- name: (( grab params.bosh_disk_pool ))

cloud_provider:
  template:
    name: openstack_cpi
    release: bosh-openstack-cpi

  ssh_tunnel:
    port: 22
    user: vcap
    host: (( grab params.static_ip ))
    private_key: (( vault meta.vault "/openstack/ssh:private" ))

  properties:
    openstack: (( grab instance_groups.bosh.properties.openstack ))
