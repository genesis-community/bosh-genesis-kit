---
name:     bosh
author:   Geoff Franks <geoff@starkandwayne.com>
homepage: https://github.com/genesis-community/bosh-genesis-kit
github:   https://github.com/genesis-community/bosh-genesis-kit

genesis_version_min: 2.5.0

certificates:
  base:
    ssl:
      ca: { valid_for: 1y }
      server:
        valid_for: 1y
        names:
        - ${params.static_ip}
          # FIXME: bosh_hostname not resolving a default.
          # can we do - ${params.bosh_hostname:bosh-${params.env}}?
          # i.e. nest the deref with a default after the ':' ?
          #- ${params.bosh_hostname}
      mbus:
        valid_for: 1y
        names:
        - ${params.static_ip}
          # FIXME: bosh_hostname not resolving a default.
          #- ${params.bosh_hostname}
      uaa:
        valid_for: 1y
        names:
        - ${params.static_ip}
      uaa-sp:
        valid_for: 1y
        names:
        - ${params.static_ip}


    credhub:
      ca: { valid_for: 1y }
      server:
        valid_for: 1y
        names:
        - ${params.static_ip}

    nats:
      ca: { valid_for: 1y }
      server:
        valid_for: 1y
        names:
        - default.nats.bosh-internal
        - ${params.static_ip}
          # FIXME: bosh_hostname not resolving a default.
          #- ${params.bosh_hostname}
      director:
        valid_for: 1y
        names:
        - default.director.bosh-internal
        - ${params.static_ip}
          # FIXME: bosh_hostname not resolving a default.
          #- ${params.bosh_hostname}
      health/monitor:
        valid_for: 1y
        names:
        - default.hm.bosh-internal
        - ${params.static_ip}
          # FIXME: bosh_hostname not resolving a default.
          #- ${params.bosh_hostname}

credentials:
  base:
    blobstore/agent:
      password: random 64
    blobstore/director:
      password: random 64
    db:
      password: random 64
    nats:
      password: random 64
    registry:
      password: random 64

    users/admin:
      password: random 30
    users/hm:
      password: random 30
    users/concourse:
      password: random 30
    vcap:
      password: random 64 fmt crypt-sha512

    credhub/encryption:
      key: random 32

    uaa/jwt: rsa 2048

    uaa/client:
      secret: random 32
    uaa/clients/director_to_credhub:
      secret: random 32
    uaa/clients/hm:
      secret: random 32
    uaa/clients/uaa_admin:
      secret: random 32

    uaa/users/credhub-cli:
      password: random 32

  bosh-init:
    mbus_bootstrap:
      password: random 64

  azure-cpi:
    azure/ssh: ssh 2048

  aws-cpi:
    aws/ssh: ssh 2048

  openstack-cpi:
    openstack/ssh: ssh 2048
