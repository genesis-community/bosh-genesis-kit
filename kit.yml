---
name:    bosh
authors: [ James Hunt <jhunt@starkandwayne.com>,
           Troy Liebel <tliebel@starkandwayne.com>,
           Dennis Bell <dbell@starkandwayne.com> ]
docs:    https://github.com/genesis-community/bosh-genesis-kit
code:    https://github.com/genesis-community/bosh-genesis-kit
version: 1.10.0

genesis_version_min: 2.7.0

certificates:
  base:
    ssl:
      ca:
        valid_for: ${params.ca_validity_period}
      server:
        valid_for: ${params.cert_validity_period}
        names:
        - ${params.static_ip}
      mbus:
        valid_for: ${params.cert_validity_period}
        names:
        - ${params.static_ip}
      uaa:
        valid_for: ${params.cert_validity_period}
        names:
        - ${params.static_ip}
      uaa-sp:
        valid_for: ${params.cert_validity_period}
        names:
        - ${params.static_ip}

    blobstore:
      ca:
        valid_for: ${params.ca_validity_period}
      server:
        valid_for: ${params.cert_validity_period}
        names:
        - ${params.static_ip}

    credhub:
      ca:
        valid_for: ${params.ca_validity_period}
      server:
        valid_for: ${params.cert_validity_period}
        names:
        - ${params.static_ip}

    nats:
      ca:
        valid_for: ${params.ca_validity_period}
      server:
        valid_for: ${params.cert_validity_period}
        names:
        - default.nats.bosh-internal
        - ${params.static_ip}
      director:
        valid_for: ${params.cert_validity_period}
        names:
        - default.director.bosh-internal
        - ${params.static_ip}
      health/monitor:
        valid_for: ${params.cert_validity_period}
        names:
        - default.hm.bosh-internal
        - ${params.static_ip}

  vault-credhub-proxy:
    vault-proxy_tls:
      server:
        valid_for: ${params.cert_validity_period}
        signed_by: credhub/ca
        names:
        - ${params.static_ip}

credentials:
  base:
    op/net: ssh 4096
    op/sys:
      password: random 12 fmt crypt-sha512

    blobstore/agent:
      password: random 64 fixed
    blobstore/director:
      password: random 64
    db:
      password: random 64
    nats:
      password: random 64 fixed
    registry:
      password: random 64 fixed

    users/admin:
      password: random 30
    users/hm:
      password: random 30
    users/concourse:
      password: random 30
    vcap:
      password: random 64 fmt crypt-sha512

    credhub/encryption:
      key: random 32 fixed

    uaa/jwt: rsa 2048
    uaa/encryption:
      key: random 64 fixed

    uaa/client:
      secret: random 32
    uaa/clients/director_to_credhub:
      secret: random 32
    uaa/clients/hm:
      secret: random 32
    uaa/clients/uaa_admin:
      secret: random 32
    uaa/clients/prometheus:
      secret: random 32

    uaa/users/credhub-cli:
      password: random 32

  vault-credhub-proxy:
    uaa/users/credhub-admin:
      password: random 32

  external-db:
    external-db/bosh_user:
      password: random 32
    external-db/credhub_user:
      password: random 32
    external-db/uaa_user:
      password: random 32
    
  proto: &proto
    mbus_bootstrap:
      password: random 64
  bosh-init: *proto

  azure: &azure
    azure/ssh: ssh 2048
  azure-cpi: *azure

  aws: &aws
    aws/ssh: ssh 2048
  aws-cpi: *aws

  openstack: &openstack
    openstack/ssh: ssh 2048
  openstack-cpi: *openstack
